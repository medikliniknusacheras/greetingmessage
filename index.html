<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Post Visit Greetings WhatsApp Message</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
  }
  input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    box-sizing: border-box;
  }
  button {
    background-color: #25D366;
    color: white;
    border: none;
    padding: 10px 15px;
    margin-top: 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
  }
  button:hover {
    background-color: #128C7E;
  }
  #whatsappLink {
    margin-top: 20px;
    padding: 15px;
    background-color: #f0f8ff;
    border-radius: 5px;
  }
  #msgLink {
    color: #25D366;
    font-weight: bold;
    text-decoration: none;
  }
  #msgLink:hover {
    text-decoration: underline;
  }
  .phone-format {
    font-size: 12px;
    color: #666;
    margin-top: 5px;
  }
</style>
</head>
<body>

<h2>Send Post Visit Greeting via WhatsApp</h2>

<form id="greetingForm" onsubmit="generateLink(); return false;">
  <label for="patientName">Patient Name:</label>
  <input type="text" id="patientName" name="patientName" required />
  
  <label for="phoneNumber">Phone Number:</label>
  <input type="tel" id="phoneNumber" name="phoneNumber" 
         placeholder="e.g. 60123456789 or +60123456789" 
         pattern="^(\+?6?01)[0-46-9][0-9]{7,8}$" required />
  <div class="phone-format">Format: 60123456789 or +60123456789 (Malaysian number)</div>

  <button type="submit">Generate WhatsApp Link</button>
</form>

<div id="whatsappLink" style="display:none;">
  <p>Your personalized greeting is ready to send:</p>
  <a id="msgLink" href="#" target="_blank">Click here to send your greeting via WhatsApp</a>
  <p><small>Note: This will open WhatsApp with your message. You can review and edit before sending.</small></p>
</div>

<script>
function generateLink() {
  const name = document.getElementById('patientName').value.trim();
  let phone = document.getElementById('phoneNumber').value.trim();

  // Clean and validate phone number
  phone = phone.replace(/\s+/g, ''); // Remove all whitespace
  if (phone.startsWith('0')) {
    phone = '6' + phone; // Convert local format (012) to international (6012)
  }
  if (!phone.startsWith('+') && !phone.startsWith('6')) {
    phone = '6' + phone; // Add country code if missing
  }

  // Save message parts
  const message = `
🏥 CareClinic Mediklinik Nusa Cheras

Thank you for visiting us! 🙏
Hi ${name}, how was your experience? We'd love your feedback to serve you better!
Kindly leave us a review:
👉 https://g.page/r/CStVx8R9JveLEAE/review

感谢您光临本诊所！🙏
您好 ${name}，您的就诊体验如何？欢迎提供宝贵意见帮助我们改进！
请点击留下评价：
👉 https://g.page/r/CStVx8R9JveLEAE/review

Terima kasih kerana berjumpa kami, ${name}! 🙏
Bagaimanakah pengalaman anda? Kongsikan maklum balas untuk kami terus memperbaiki perkhidmatan!
Sila tinggalkan ulasan:
👉 https://g.page/r/CStVx8R9JveLEAE/review

📍 Address/地址/Alamat:
No 42A, Jln Damai Perdana 6/1A, Bandar Damai Perdana, 56000 Cheras, KL

⏰ Operating Hours/营业时间/Waktu Operasi:
8:00 AM - 11:00 PM (Daily/每日/Setiap Hari)

💡 SPECIAL PROMOTION! 特别优惠! PROMOSI ISTIMEWA!
We've merged with CareClinics starting 1 May 2025!
本诊所已从2025年5月1日起与CareClinics合并！
Kami telah bergabung dengan CareClinics mulai 1 Mei 2025!

✨ Unbelievable medical check-up packages from RM30 only!
✨ 体检配套最低仅需RM30起!
✨ Pakej pemeriksaan kesihatan bermula dari RM30 sahaja!

📱 Chat with us now to know more! / 立即咨询了解更多! / Hubungi kami untuk maklumat lanjut!
  `.trim();

  const encodedMessage = encodeURIComponent(message);
  const whatsappURL = `https://wa.me/${phone}?text=${encodedMessage}`;

  // Set link
  const linkElement = document.getElementById('msgLink');
  linkElement.href = whatsappURL;
  linkElement.textContent = `Send message to ${phone}`;

  // Show the link
  document.getElementById('whatsappLink').style.display = 'block';
  
  // Scroll to the link
  document.getElementById('whatsappLink').scrollIntoView({ behavior: 'smooth' });
}
</script>

</body>
</html>
